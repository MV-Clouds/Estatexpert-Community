<template>
        <div class="container">
            <h1 style="font-size: 36px;font-weight:700;"><b><span style="border-bottom:1px solid rgba(42, 50, 60, 1)"><b>Buyer</b></span>
              <span style="border-bottom:1px solid rgba(42, 50, 60, 1)">&nbsp; </span>
                <span style="border-bottom:1px solid rgba(42, 50, 60, 1)"><b>In</b></span>
                <span ><b>f</b></span>
                <span style="border-bottom:1px solid rgba(1, 118, 211, 0.5);"><b>orm</b></span>
                <span ><b>a</b></span>
                <span style="border-bottom:1px solid rgba(1, 118, 211, 0.25);"><b>t</b></span>
                <span><b>ion</b></span></b></h1>
                <br/>
            <div class="buttons">
                <lightning-button variant={allBtnVarient} label="All" title="All" onclick={handleFilter} ></lightning-button>
                <lightning-button variant={buyBtnVarient} label="Buy" title="Buy" onclick={handleFilter} class="slds-m-left_x-small"></lightning-button>
                <lightning-button variant={rentBtnVarient} label="Rent" title="Rent" onclick={handleFilter} class="slds-m-left_x-small"></lightning-button>
            </div>
            <br/>
          <div class="table">
            <template if:true={showSpinner}>
              <lightning-spinner size="medium"> </lightning-spinner>
            </template>
            <template if:true={isData}>
            <table class="slds-table slds-table_bordered" aria-labelledby="element-with-table-label other-element-with-table-label">
              <thead>
                <tr class="slds-line-height_reset">
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="No.">No.</div>
                  </th>
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="Property Name">PropertyName</div>
                  </th>
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="Buyer Name">BuyerName</div>
                  </th>
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="Mobile No.">Mobile No.</div>
                  </th>
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="Email Id">Email ID</div>
                  </th>
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="Inquiry Date">Inquiry Date</div>
                  </th>
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="Status">Status</div>
                  </th>
                  <th class="" scope="col">
                    <div class="slds-truncate rowValue" title="Action">Action</div>
                  </th>
                </tr>
              </thead>
              <tbody >
                <template for:each={FilteredData} for:item="item">
                <tr class="slds-hint-parent" key={item.Id}>
                  <td data-label="Thumbnail">
                    <div class="slds-truncate rowValue" title="Number">{item.number}</div>
                  </td>
                  <td data-label="Title">
                    <div class="box">
                        <div class="slds-truncate imgbox" title="Thumbnail"><img src={item.ImageURL} class="slds-avatar slds-avatar_rectangle slds-avatar_large customimg" alt="Thumbnail"/></div>
                        <div class="slds-truncate rowValue propTitle" title="Property Name">{item.Listing__r.Property__r.Name}</div>

                    </div>
                  </td>
                  <td data-label="buyer_name">
                     <div class="box" style="display: flex;align-items:center;">
                        <lightning-avatar size="medium" style="margin: 10px;"  variant="circle" src={profileImgUrl}></lightning-avatar>
                        <div class="slds-truncate rowValue" title="buyer name">{item.Listing__r.Property__r.Current_Owner__r.Name}</div>
                    </div>

                  </td>
                  <td data-label="mobile">
                    <div class="slds-truncate rowValue" title="mobile phone">{item.Listing__r.Property__r.Current_Owner__r.MobilePhone}</div>

                  </td>
                  <td data-label="email">
                    <div class="slds-truncate rowValue emailDiv" title="email" >{item.Listing__r.Property__r.Current_Owner__r.Email}</div>

                  </td>
                  <td data-label="date">
                    <div class="slds-truncate rowValue" title="date">{item.Inquiry_Date__c}</div>

                  </td>
                  <td data-label="dropdown">
                    <div class="slds-truncate rowValue dropdown" title="status">
                      <!-- <lightning-combobox
                        data-id="status"
                        name="status"
                        value={item.Status__c}
                        placeholder="Select Status"
                        options={options}
                        onchange={handleChange}
                        ></lightning-combobox> -->
                        <lightning-select
                            name="status"
                            value={item.Status__c}
                            options={options}
                            onchange={handleStatusChange}
                            data-key={item.Id}
                            ></lightning-select>
                      </div>
                  </td>
                  <td data-label="actions">
                    <div class="slds-truncate rowValue" title="actions">
                      <lightning-button-icon icon-name="utility:save"   alternative-text="Save" class="slds-m-left_xx-small save-button" title="Save" data-key={item.Id} data-status={item.Status__c} data-url={item.ImageURL} onclick={saveUpdatedStatus} disabled></lightning-button-icon>
                      <lightning-button-icon icon-name="utility:delete"   alternative-text="Delete" class="slds-m-left_xx-small" title="Delete" data-key={item.Id}  data-url={item.ImageURL} onclick={delete_row}></lightning-button-icon>
                    </div>
                  </td>
                </tr>
              </template>
              </tbody>
            </table>
          </template>
          <template if:false={isData}>
            <div class="message">
              <h1>No inquiries found for the current user.</h1>
            </div>
          </template>
          </div>
        </div>
</template>